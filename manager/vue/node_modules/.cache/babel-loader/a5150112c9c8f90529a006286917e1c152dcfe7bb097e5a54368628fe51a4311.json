{"ast":null,"code":"import Comment from '@/components/Comment.vue';\nexport default {\n  name: 'ActivityDetail',\n  data() {\n    return {\n      id: this.$route.params.id,\n      detailData: {},\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      likeCount: 0,\n      collectCount: 0\n    };\n  },\n  components: {\n    Comment\n  },\n  computed: {},\n  created() {},\n  mounted() {\n    this.$request.put('/activity/updateReadCount/' + this.id).then(res => {\n      this.selectById(this.id);\n    });\n  },\n  methods: {\n    selectById(id) {\n      this.$request.get('/activity/selectById/' + id).then(res => {\n        this.detailData = res.data;\n        this.likeCount = res.data.likeCount;\n        this.collectCount = res.data.collectCount;\n      });\n    },\n    activitySignUp() {\n      this.$request.post('/activitySign/add', {\n        userId: this.user.id,\n        actId: this.id\n      }).then(res => {\n        if (res.code === '200') {\n          this.$message.success('报名成功');\n        } else {\n          this.$message.error('报名失败');\n        }\n      });\n    },\n    changeLikes() {\n      this.$request.post('/likes/changeLikes', {\n        fid: this.id,\n        module: '活动'\n      }).then(res => {\n        this.selectById(this.id);\n      });\n    },\n    //点击收藏按钮\n    changeCollects() {\n      this.$request.post('/collects/changeCollects', {\n        fid: this.id,\n        module: '活动'\n      }).then(res => {\n        this.selectById(this.id);\n      });\n    }\n  }\n};","map":{"version":3,"names":["Comment","name","data","id","$route","params","detailData","user","JSON","parse","localStorage","getItem","likeCount","collectCount","components","computed","created","mounted","$request","put","then","res","selectById","methods","get","activitySignUp","post","userId","actId","code","$message","success","error","changeLikes","fid","module","changeCollects"],"sources":["src/views/front/ActivityDetail.vue"],"sourcesContent":["<!--  -->\r\n<template>\r\n  <div class=\"main-content\">\r\n    <div class=\"card\" style=\"display: flex;align-items: center;margin-bottom:10px ;\" >\r\n        <img :src=\"detailData.cover\" alt=\"\" style=\"border-radius: 5px; margin-right: 20px;\">\r\n        <div style=\"flex: 1;\">\r\n            <h2 style=\"font-size: 30px;margin-bottom: 15px;\" >{{detailData.name}}</h2>\r\n            <p style=\"font-size: 16px; color: #666;margin-bottom: 10px;\">{{detailData.descr}}</p>\r\n            <p style=\"font-size: 16px; color: #666;margin-bottom: 10px;\"><i class=\"el-icon-date\"></i> 时间:{{detailData.start}} 至 {{detailData.end}}</p>\r\n            <p style=\"font-size: 16px; color: #666;margin-bottom: 10px;\" v-if=\"detailData.form==='线上活动'\"><i class=\"el-icon-position\"></i>\r\n                 地址:<a :href=\"detailData.address\" target=\"_blank\">{{detailData.address}}</a>\r\n                 <el-tag style=\"margin-left: 10px;\">{{detailData.form}}</el-tag>\r\n            </p>\r\n            <p style=\"font-size: 16px; color: #666;margin-bottom: 10px;\" v-if=\"detailData.form==='线下活动'\">\r\n                <i class=\"el-icon-position\"></i> 地址:{{detailData.address}}\r\n                <el-tag style=\"margin-left: 10px;\">{{detailData.form}}</el-tag>\r\n            </p>\r\n            <el-button type=\"primary\" disabled v-if=\"detailData.due\" key=\"已结束\">已结束</el-button>\r\n            <el-button type=\"primary\" disabled v-else-if=\"detailData.sign\" key=\"已报名\">已报名</el-button>\r\n            <el-button type=\"primary\" v-else @click=\"activitySignUp\">报名</el-button>\r\n            <div display=\"flex\" style=\"margin-top:10px ;\">\r\n                <el-button type=\"success\" style=\"margin-right: 10px;\" @click=\"changeLikes\" v-if=\"!detailData.isLiked\">点赞 {{likeCount}}</el-button>\r\n                <el-button type=\"success\" style=\"margin-right: 10px;\" @click=\"changeLikes\" v-else>已点赞 {{likeCount}}</el-button>\r\n                <el-button type=\"warning\" style=\"margin-right: 10px;\" @click=\"changeCollects\" v-if=\"!detailData.isCollected\">收藏 {{collectCount}}</el-button>\r\n                <el-button type=\"warning\" style=\"margin-right: 10px;\" @click=\"changeCollects\" v-else>已收藏 {{collectCount}}</el-button>\r\n                <el-button type=\"info\" style=\"margin-right: 10px;\">阅读量 {{detailData.readCount}}</el-button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"card\" style=\"margin-bottom: 20px;\">\r\n    <div class=\"w-e-text\" >\r\n        <div style=\"padding-left: 10px; border-left: 5px solid #0066bc;font-size: 24px; font-weight: bold;margin-bottom: 10px;\">活动详情</div>\r\n        <div v-html=\"detailData.content\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <Comment :id=\"id\" module=\"活动\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Comment from '@/components/Comment.vue';\r\nexport default {\r\n  name: 'ActivityDetail',\r\n  data () {\r\n    return {\r\n        id:this.$route.params.id,\r\n        detailData: {},\r\n        user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n        likeCount: 0,\r\n        collectCount: 0,\r\n    };\r\n  },\r\n\r\n  components: {Comment},\r\n\r\n  computed: {},\r\n  created(){\r\n    \r\n  },\r\n  mounted(){\r\n    this.$request.put('/activity/updateReadCount/'+this.id).then(res => {\r\n        this.selectById(this.id);\r\n    })\r\n   \r\n  },\r\n\r\n  methods: {\r\n    selectById(id){\r\n        this.$request.get('/activity/selectById/'+id)\r\n       .then(res => {\r\n            this.detailData = res.data;\r\n            this.likeCount = res.data.likeCount;\r\n            this.collectCount = res.data.collectCount;\r\n        })\r\n    },\r\n    activitySignUp(){\r\n        this.$request.post('/activitySign/add',{userId:this.user.id,actId:this.id}).then(res => {\r\n            if(res.code === '200'){\r\n                this.$message.success('报名成功');\r\n            }else{\r\n                this.$message.error('报名失败');\r\n            }\r\n        })\r\n    },\r\n    changeLikes() {\r\n        this.$request.post('/likes/changeLikes', {\r\n            fid: this.id,\r\n            module: '活动'\r\n        }).then(res => {\r\n            this.selectById(this.id);\r\n        })\r\n    },\r\n    //点击收藏按钮\r\n    changeCollects() {\r\n        this.$request.post('/collects/changeCollects', {\r\n            fid: this.id,\r\n            module: '活动'\r\n        }).then(res => {\r\n            this.selectById(this.id);\r\n        })\r\n    }\r\n\r\n\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped>\r\n</style>"],"mappings":"AA0CA,OAAAA,OAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,EAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAF,EAAA;MACAG,UAAA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,SAAA;MACAC,YAAA;IACA;EACA;EAEAC,UAAA;IAAAd;EAAA;EAEAe,QAAA;EACAC,QAAA,GAEA;EACAC,QAAA;IACA,KAAAC,QAAA,CAAAC,GAAA,qCAAAhB,EAAA,EAAAiB,IAAA,CAAAC,GAAA;MACA,KAAAC,UAAA,MAAAnB,EAAA;IACA;EAEA;EAEAoB,OAAA;IACAD,WAAAnB,EAAA;MACA,KAAAe,QAAA,CAAAM,GAAA,2BAAArB,EAAA,EACAiB,IAAA,CAAAC,GAAA;QACA,KAAAf,UAAA,GAAAe,GAAA,CAAAnB,IAAA;QACA,KAAAU,SAAA,GAAAS,GAAA,CAAAnB,IAAA,CAAAU,SAAA;QACA,KAAAC,YAAA,GAAAQ,GAAA,CAAAnB,IAAA,CAAAW,YAAA;MACA;IACA;IACAY,eAAA;MACA,KAAAP,QAAA,CAAAQ,IAAA;QAAAC,MAAA,OAAApB,IAAA,CAAAJ,EAAA;QAAAyB,KAAA,OAAAzB;MAAA,GAAAiB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAQ,IAAA;UACA,KAAAC,QAAA,CAAAC,OAAA;QACA;UACA,KAAAD,QAAA,CAAAE,KAAA;QACA;MACA;IACA;IACAC,YAAA;MACA,KAAAf,QAAA,CAAAQ,IAAA;QACAQ,GAAA,OAAA/B,EAAA;QACAgC,MAAA;MACA,GAAAf,IAAA,CAAAC,GAAA;QACA,KAAAC,UAAA,MAAAnB,EAAA;MACA;IACA;IACA;IACAiC,eAAA;MACA,KAAAlB,QAAA,CAAAQ,IAAA;QACAQ,GAAA,OAAA/B,EAAA;QACAgC,MAAA;MACA,GAAAf,IAAA,CAAAC,GAAA;QACA,KAAAC,UAAA,MAAAnB,EAAA;MACA;IACA;EAGA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}